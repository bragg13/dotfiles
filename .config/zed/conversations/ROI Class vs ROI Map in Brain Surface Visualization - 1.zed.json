{"id":"9a3ad2b6-5238-4fb2-9953-dec6b9279630","zed":"context","version":"0.4.0","text":"\n\nwhat is the difference between the roi class and roi map?\n\n\n```py aigs-nsd-reconstruction/Algonauts Challenge Tutorial.py:44-85\n# Excerpt from: \nspheres = ['left', 'right'] \nroi = [\"V1v\", \"V1d\", \"V2v\", \"V2d\", \"V3v\", \"V3d\", \"hV4\", \"EBA\", \"FBA-1\", \"FBA-2\", \"mTL-bodies\", \"OFA\", \"FFA-1\", \"FFA-2\", \"mTL-faces\", \"aTL-faces\", \"OPA\", \"PPA\", \"RSC\", \"OWFA\", \"VWFA-1\", \"VWFA-2\", \"mfs-words\", \"mTL-words\", \"early\", \"midventral\", \"midlateral\", \"midparietal\", \"ventral\", \"lateral\", \"parietal\"]\n\ndef visualise_roi_brain_surface_map(roi=\"EBA\", hemisphere=\"left\"):\n    # Define the ROI class\n    roi_class = ''\n    if roi in [\"V1v\", \"V1d\", \"V2v\", \"V2d\", \"V3v\", \"V3d\", \"hV4\"]:\n        roi_class = 'prf-visualrois'\n    elif roi in [\"EBA\", \"FBA-1\", \"FBA-2\", \"mTL-bodies\"]:\n        roi_class = 'floc-bodies'\n    elif roi in [\"OFA\", \"FFA-1\", \"FFA-2\", \"mTL-faces\", \"aTL-faces\"]:\n        roi_class = 'floc-faces'\n    elif roi in [\"OPA\", \"PPA\", \"RSC\"]:\n        roi_class = 'floc-places'\n    elif roi in [\"OWFA\", \"VWFA-1\", \"VWFA-2\", \"mfs-words\", \"mTL-words\"]:\n        roi_class = 'floc-words'\n    elif roi in [\"early\", \"midventral\", \"midlateral\", \"midparietal\", \"ventral\", \"lateral\", \"parietal\"]:\n        roi_class = 'streams'\n    \n    # Load the ROI brain surface maps\n    roi_class_dir = os.path.join(args.data_dir, 'roi_masks', hemisphere[0]+'h.'+roi_class+'_fsaverage_space.npy') #lh.floc-bodies_fsaverage_space.npy\n    roi_map_dir = os.path.join(args.data_dir, 'roi_masks',\n        'mapping_'+roi_class+'.npy')\n    fsaverage_roi_class = np.load(roi_class_dir)\n    roi_map = np.load(roi_map_dir, allow_pickle=True).item()\n    \n    # Select the vertices corresponding to the ROI of interest\n    roi_mapping = list(roi_map.keys())[list(roi_map.values()).index(roi)]\n    fsaverage_roi = np.asarray(fsaverage_roi_class == roi_mapping, dtype=int)\n    \n    # Create the interactive brain surface map\n    fsaverage = datasets.fetch_surf_fsaverage('fsaverage')\n    view = plotting.view_surf(\n        surf_mesh=fsaverage['infl_'+hemisphere],\n        surf_map=fsaverage_roi,\n        bg_map=fsaverage['sulc_'+hemisphere],\n        threshold=1e-14,\n        cmap='cool',\n        colorbar=False,\n        title=roi+', '+hemisphere+' hemisphere'\n        )\n    view\n```\n\nIn this code, `roi_class` and `roi_map` serve different purposes:\n\n1. `roi_class`:\n- This is a string that categorizes ROIs (Regions of Interest) into broader functional groups\n- For example:\n  - Visual ROIs: \"prf-visualrois\"\n  - Body-selective areas: \"floc-bodies\"\n  - Face-selective areas: \"floc-faces\"\n  - Place-selective areas: \"floc-places\"\n  - Word-selective areas: \"floc-words\"\n  - Visual streams: \"streams\"\n- Used to locate the correct data files for loading ROI masks\n\n2. `roi_map`:\n- This is a dictionary that maps numerical indices to specific ROI names within each class\n- Loaded from a .npy file that contains the mapping information\n- Used to convert between ROI names and their numerical representations in the data\n- For example, it might look something like:\n  ```python\n  {1: 'EBA', 2: 'FBA-1', 3: 'FBA-2', ...}\n  ```\n\nIn the code, `roi_class` is first used to determine which set of files to load, and then `roi_map` is used to find the specific numerical value associated with the requested ROI name for visualization purposes.\n\nThink of `roi_class` as the category or folder, and `roi_map` as the detailed lookup table within that category.\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":82}}},{"id":{"replica_id":0,"value":67},"start":2234,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":83}}},{"id":{"replica_id":0,"value":68},"start":3396,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":84}}}],"summary":"ROI Class vs ROI Map in Brain Surface Visualization","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null}]}